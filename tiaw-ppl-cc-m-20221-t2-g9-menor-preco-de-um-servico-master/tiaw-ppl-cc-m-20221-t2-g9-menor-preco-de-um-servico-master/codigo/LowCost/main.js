(() => { "use strict"; function e() { const e = document.querySelector('[data-list="wrapper"]'); let t = ""; e && (JSON.parse(localStorage.getItem("sistema:users") || "").users.map((e => { const o = `\n        <tr>\n          <td>${e.name}</td>\n          <td>${e.login}</td>\n          <td>${e.email}</td>\n        </tr>\n      `; return t += o })), e.innerHTML = t) } const t = window.location.href.replace("sistema/index.html", "index.html"); new class { constructor(e, t, o) { this.containerModal = document.querySelector(e), this.openBtn = document.querySelector(t), this.closeBtn = document.querySelector(o), this.classActive = "active", this.open = this.open.bind(this), this.close = this.close.bind(this), this.clickOut = this.clickOut.bind(this) } open(e) { e.preventDefault(), this.containerModal.classList.add(this.classActive) } close() { this.containerModal.classList.remove(this.classActive) } clickOut(e) { e.target === this.containerModal && this.close() } addModalEvent() { this.containerModal.addEventListener("click", this.clickOut), this.openBtn.addEventListener("click", this.open), this.closeBtn.addEventListener("click", this.close) } init() { return this.containerModal && this.openBtn && this.closeBtn && this.addModalEvent(), this } }(".modal-overlay", '[data-modal="open"]', '[data-modal="close"]').init(), async function () { try { if (!localStorage.getItem("sistema:users")) { const t = { users: [{ name: "vitor", login: "Admin", email: "vitor@gmail.com", password: "321" }, { name: "exemplo1", login: "exemplo1", email: "exemplo1@gmail.com", password: "123" }, { name: "joao", login: "joao", email: "joaosilva@gmail.com", password: "1234" }, { name: "lucas", login: "lucas", email: "pedinho123@gmail.com", password: "1234" }] }; localStorage.setItem("sistema:users", JSON.stringify(t)), e() } if (!localStorage.getItem("sistema:isLoggedIn")) { const e = !1; localStorage.setItem("sistema:isLoggedIn", JSON.stringify(e)) } if (localStorage.getItem("sistema:isLoggedIn")) { const e = JSON.parse(localStorage.getItem("sistema:isLoggedIn") || ""); e && "/" == window.location.pathname && (window.location = window.location.href += "sistema"), e || "/sistema/" != window.location.pathname || (window.location = t) } } catch (e) { console.error(e) } }(), function () { const e = document.querySelector('[data-form="create"]'), t = document.querySelector('[data-form="success"]'); e && e.addEventListener("submit", (function (e) { e.preventDefault(); const o = document.querySelector('[data-create="name"]').value, s = document.querySelector('[data-create="login"]').value, a = document.querySelector('[data-create="email"]').value, n = document.querySelector('[data-create="password"]').value, i = JSON.parse(localStorage.getItem("sistema:users") || ""), c = { name: o, login: s, email: a, password: n }; i.users.push(c), localStorage.setItem("sistema:users", JSON.stringify(i)), t.classList.remove("hide") })) }(), e(), function () { const e = document.querySelector('[data-form="login"]'), t = document.querySelector('[data-form="error"]'); e && e.addEventListener("submit", (function (e) { e.preventDefault(); const o = document.querySelector('[data-login="login"]').value, s = document.querySelector('[data-login="password"]').value, a = JSON.parse(localStorage.getItem("sistema:users") || "").users.find((e => o == e.login && s == e.password)); if (a) { const e = !0; localStorage.setItem("sistema:isLoggedIn", JSON.stringify(e)); const t = { name: a.name }; localStorage.setItem("sistema:userInfo", JSON.stringify(t)), window.location = window.location.href.replace("index.html", "") + "sistema/index.html" } !a && t && t.classList.remove("hide") })) }(), function () { const e = document.querySelector("[data-logout]"); e && e.addEventListener("click", (function (e) { e.preventDefault(), localStorage.setItem("sistema:isLoggedIn", JSON.stringify(!1)), window.location = t })) }(), function () { const e = document.querySelector("[data-wellcome]"); e && function () { const t = JSON.parse(localStorage.getItem("sistema:userInfo") || ""); e.innerHTML = "Ol√° " + t.name }() }() })();